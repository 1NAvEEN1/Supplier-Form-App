import{a as A,r as y}from"./react-sra79OoS.js";import{_ as X}from"./@babel-SkaEL2tl.js";import{c as G}from"./html-parse-stringify-gNhRsLCw.js";function O(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const z={};function P(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&z[e[0]]||(typeof e[0]=="string"&&(z[e[0]]=new Date),O(...e))}const M=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function U(t,e,n){t.loadNamespaces(e,M(t,n))}function W(t,e,n,d){typeof n=="string"&&(n=[n]),n.forEach(h=>{t.options.ns.indexOf(h)<0&&t.options.ns.push(h)}),t.loadLanguages(e,M(t,d))}function Q(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const d=e.languages[0],h=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(d.toLowerCase()==="cimode")return!0;const u=(f,N)=>{const o=e.services.backendConnector.state[`${f}|${N}`];return o===-1||o===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!u(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(d,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||u(d,t)&&(!h||u(s,t)))}function Z(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(P("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(h,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&h.services.backendConnector.backend&&h.isLanguageChangingTo&&!s(h.isLanguageChangingTo,t))return!1}}):Q(t,e,n)}const _=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ee={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},te=t=>ee[t],ne=t=>t.replace(_,te);let R={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ne};function se(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};R={...R,...t}}function D(){return R}let J;function re(t){J=t}function V(){return J}function B(t,e){if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n}function K(t){if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?F(e):e}function oe(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(e=>y.isValidElement(e))}function F(t){return Array.isArray(t)?t:[t]}function ae(t,e){const n={...e};return n.props=Object.assign(t.props,e.props),n}function q(t,e){if(!t)return"";let n="";const d=F(t),h=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return d.forEach((s,u)=>{if(typeof s=="string")n+=`${s}`;else if(y.isValidElement(s)){const f=Object.keys(s.props).length,N=h.indexOf(s.type)>-1,o=s.props.children;if(!o&&N&&f===0)n+=`<${s.type}/>`;else if(!o&&(!N||f!==0))n+=`<${u}></${u}>`;else if(s.props.i18nIsDynamicList)n+=`<${u}></${u}>`;else if(N&&f===1&&typeof o=="string")n+=`<${s.type}>${o}</${s.type}>`;else{const x=q(o,e);n+=`<${u}>${x}</${u}>`}}else if(s===null)O("Trans: the passed in value is invalid - seems you passed in a null child.");else if(typeof s=="object"){const{format:f,...N}=s,o=Object.keys(N);if(o.length===1){const x=f?`${o[0]}, ${f}`:o[0];n+=`{{${x}}}`}else O("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else O("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),n}function ie(t,e,n,d,h,s){if(e==="")return[];const u=d.transKeepBasicHtmlNodesFor||[],f=e&&new RegExp(u.map(l=>`<${l}`).join("|")).test(e);if(!t&&!f&&!s)return[e];const N={};function o(l){F(l).forEach(a=>{typeof a!="string"&&(B(a)?o(K(a)):typeof a=="object"&&!y.isValidElement(a)&&Object.assign(N,a))})}o(t);const x=G.parse(`<0>${e}</0>`),$={...N,...h};function w(l,p,a){const c=K(l),g=E(c,p.children,a);return oe(c)&&g.length===0||l.props&&l.props.i18nIsDynamicList?c:g}function C(l,p,a,c,g){l.dummy?(l.children=p,a.push(y.cloneElement(l,{key:c},g?void 0:p))):a.push(...y.Children.map([l],i=>{const r={...i.props};return delete r.i18nIsDynamicList,A.createElement(i.type,X({},r,{key:c,ref:i.ref},g?{}:{children:p}))}))}function E(l,p,a){const c=F(l);return F(p).reduce((i,r,j)=>{const k=r.children&&r.children[0]&&r.children[0].content&&n.services.interpolator.interpolate(r.children[0].content,$,n.language);if(r.type==="tag"){let T=c[parseInt(r.name,10)];a.length===1&&!T&&(T=a[0][r.name]),T||(T={});const b=Object.keys(r.attrs).length!==0?ae({props:r.attrs},T):T,I=y.isValidElement(b),S=I&&B(r,!0)&&!r.voidElement,L=f&&typeof b=="object"&&b.dummy&&!I,H=typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,r.name);if(typeof b=="string"){const v=n.services.interpolator.interpolate(b,$,n.language);i.push(v)}else if(B(b)||S){const v=w(b,r,a);C(b,v,i,j)}else if(L){const v=E(c,r.children,a);C(b,v,i,j)}else if(Number.isNaN(parseFloat(r.name)))if(H){const v=w(b,r,a);C(b,v,i,j,r.voidElement)}else if(d.transSupportBasicHtmlNodes&&u.indexOf(r.name)>-1)if(r.voidElement)i.push(y.createElement(r.name,{key:`${r.name}-${j}`}));else{const v=E(c,r.children,a);i.push(y.createElement(r.name,{key:`${r.name}-${j}`},v))}else if(r.voidElement)i.push(`<${r.name} />`);else{const v=E(c,r.children,a);i.push(`<${r.name}>${v}</${r.name}>`)}else if(typeof b=="object"&&!I){const v=r.children[0]?k:null;v&&i.push(v)}else C(b,k,i,j,r.children.length!==1||!k)}else if(r.type==="text"){const T=d.transWrapTextNodes,b=s?d.unescape(n.services.interpolator.interpolate(r.content,$,n.language)):n.services.interpolator.interpolate(r.content,$,n.language);T?i.push(y.createElement(T,{key:`${r.name}-${j}`},b)):i.push(b)}return i},[])}const m=E([{dummy:!0,children:t||[]}],x,F(t||[]));return K(m[0])}function ce(t){let{children:e,count:n,parent:d,i18nKey:h,context:s,tOptions:u={},values:f,defaults:N,components:o,ns:x,i18n:$,t:w,shouldUnescape:C,...E}=t;const m=$||V();if(!m)return P("You will need to pass in an i18next instance by using i18nextReactModule"),e;const l=w||m.t.bind(m)||(S=>S);s&&(u.context=s);const p={...D(),...m.options&&m.options.react};let a=x||l.ns||m.options&&m.options.defaultNS;a=typeof a=="string"?[a]:a||["translation"];const c=q(e,p),g=N||c||p.transEmptyNodeValue||h,{hashTransKey:i}=p,r=h||(i?i(c||g):c||g);m.options&&m.options.interpolation&&m.options.interpolation.defaultVariables&&(f=f&&Object.keys(f).length>0?{...f,...m.options.interpolation.defaultVariables}:{...m.options.interpolation.defaultVariables});const j=f?u.interpolation:{interpolation:{...u.interpolation,prefix:"#$?",suffix:"?$#"}},k={...u,count:n,...f,...j,defaultValue:g,ns:a},T=r?l(r,k):g;o&&Object.keys(o).forEach(S=>{const L=o[S];if(typeof L.type=="function"||!L.props||!L.props.children||T.indexOf(`${S}/>`)<0&&T.indexOf(`${S} />`)<0)return;function H(){return A.createElement(A.Fragment,null,L)}o[S]=A.createElement(H,null)});const b=ie(o||e,T,m,p,k,C),I=d!==void 0?d:p.defaultTransParent;return I?y.createElement(I,E,b):b}const de={type:"3rdParty",init(t){se(t.options.react),re(t)}},Y=y.createContext();class le{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function me(t){let{children:e,count:n,parent:d,i18nKey:h,context:s,tOptions:u={},values:f,defaults:N,components:o,ns:x,i18n:$,t:w,shouldUnescape:C,...E}=t;const{i18n:m,defaultNS:l}=y.useContext(Y)||{},p=$||m||V(),a=w||p&&p.t.bind(p);return ce({children:e,count:n,parent:d,i18nKey:h,context:s,tOptions:u,values:f,defaults:N,components:o,ns:x||a&&a.ns||l||p&&p.options&&p.options.defaultNS,i18n:p,t:w,shouldUnescape:C,...E})}const ue=(t,e)=>{const n=y.useRef();return y.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function ye(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:d,defaultNS:h}=y.useContext(Y)||{},s=n||d||V();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new le),!s){P("You will need to pass in an i18next instance by using initReactI18next");const c=(i,r)=>typeof r=="string"?r:r&&typeof r=="object"&&typeof r.defaultValue=="string"?r.defaultValue:Array.isArray(i)?i[i.length-1]:i,g=[c,{},!1];return g.t=c,g.i18n={},g.ready=!1,g}s.options.react&&s.options.react.wait!==void 0&&P("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...D(),...s.options.react,...e},{useSuspense:f,keyPrefix:N}=u;let o=t||h||s.options&&s.options.defaultNS;o=typeof o=="string"?[o]:o||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(o);const x=(s.isInitialized||s.initializedStoreOnce)&&o.every(c=>Z(c,s,u));function $(){return s.getFixedT(e.lng||null,u.nsMode==="fallback"?o:o[0],N)}const[w,C]=y.useState($);let E=o.join();e.lng&&(E=`${e.lng}${E}`);const m=ue(E),l=y.useRef(!0);y.useEffect(()=>{const{bindI18n:c,bindI18nStore:g}=u;l.current=!0,!x&&!f&&(e.lng?W(s,e.lng,o,()=>{l.current&&C($)}):U(s,o,()=>{l.current&&C($)})),x&&m&&m!==E&&l.current&&C($);function i(){l.current&&C($)}return c&&s&&s.on(c,i),g&&s&&s.store.on(g,i),()=>{l.current=!1,c&&s&&c.split(" ").forEach(r=>s.off(r,i)),g&&s&&g.split(" ").forEach(r=>s.store.off(r,i))}},[s,E]);const p=y.useRef(!0);y.useEffect(()=>{l.current&&!p.current&&C($),p.current=!1},[s,N]);const a=[w,s,x];if(a.t=w,a.i18n=s,a.ready=x,x||!x&&!f)return a;throw new Promise(c=>{e.lng?W(s,e.lng,o,()=>c()):U(s,o,()=>c())})}export{me as T,de as i,ye as u};
