import{r as p,j as e}from"./react-G0VBmWxS.js";import{u as q,a as J}from"./react-redux-3PpUptFA.js";import{a as v,b as E,c as Q}from"./index-zbrcSfav.js";import{u as V,T as N}from"./react-i18next-Ld4qvRaQ.js";import{B as m,G as r,T as n,D as A,R as z,h as S,i as w,g as W,j as I,k as u,m as b,b as P,u as k,I as T,n as Y,o as _,p as K,q as B,t as U,v as L}from"./@mui-yOQ-dzD9.js";import"./@babel-SkaEL2tl.js";import"./use-sync-external-store-BBrSSgse.js";import"./react-dom-wkoTY-Le.js";import"./scheduler-iwWdm5Ml.js";import"./react-router-dom-8rnrgVg8.js";import"./react-router-mRKdHBLr.js";import"./@remix-run-EOO7uaRF.js";import"./@reduxjs-OWLxucYK.js";import"./redux-vWdE9iQ8.js";import"./immer-2VFgZgpn.js";import"./reselect-knrTZChY.js";import"./redux-thunk-qyK_zz9Y.js";import"./prop-types-nTg9hSou.js";import"./i18next-NCffezqA.js";import"./i18next-http-backend-6HvsPMKJ.js";import"./cross-fetch-xd-Enngl.js";import"./clsx-2Jv0kmJG.js";import"./react-transition-group-NM3J4weW.js";import"./@emotion-cuKUoGzU.js";import"./hoist-non-react-statics-MGeNrgoW.js";import"./react-is-cHOZVpRJ.js";import"./stylis-UTZzoVRx.js";import"./@popperjs-zyV4rJhQ.js";import"./html-parse-stringify-gNhRsLCw.js";import"./void-elements-KNW2nDh4.js";const f=({children:d,...c})=>e.jsx(m,{sx:{boxShadow:"1px 5px 8px 5px rgba(0, 0, 0, 0.05)",borderRadius:3,mt:3,pt:1,pr:0,pb:1,...c},children:d}),$=({closeDrawer:d})=>{const c=q(),{t:s}=V(),C=J(t=>t.form.formData),h={productOrRaw:!0,category:0,subCategory:0,name:"",pricing:{price:"",priceQtyUnitValue:"",priceQtyUnit:10},supplyQty:"",orderQty:"",supplyFrequency:!0,selectedMonths:[],otherDetails:""},[i,j]=p.useState(h);p.useEffect(()=>{var a;const t=v.getState().form.selectedProductIndex;t!==99&&j((a=v.getState().form.formData)==null?void 0:a.productDetails[t])},[v.getState().form.selectedProductIndex]);const l=(t,a,x=null)=>{j(x?{...i,[t]:{...i[t],[x]:a}}:{...i,[t]:a})},D=t=>{const x=i.selectedMonths.includes(t)?i.selectedMonths.filter(O=>O!==t):[...i.selectedMonths,t];l("selectedMonths",x)},F=()=>{const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e.jsx(r,{container:!0,spacing:2,children:t.map((a,x)=>e.jsx(r,{item:!0,xs:3,display:"flex",justifyContent:"center",children:e.jsx(m,{bgcolor:i.selectedMonths.includes(a)?"#F47621":"#D5D8DC",onClick:()=>D(a),sx:{borderRadius:2,width:60,height:40,"&:hover":{cursor:"pointer",border:"2px solid #F47621"}},display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(n,{textAlign:"center",children:a})})},x))})},y=()=>{console.log(i);const t=[...C.productDetails];v.getState().form.selectedProductIndex!==99?t[v.getState().form.selectedProductIndex]=i:t.push(i),c(E(t)),j(h),c(Q(99)),d()},R=()=>{j(h),c(Q(99)),d()};return e.jsx(m,{sx:{display:"flex",justifyContent:"center",bgcolor:"#F9FAFB"},children:e.jsxs(r,{container:!0,sx:{minHeight:"90svh",p:2,width:500,borderRadius:4},children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsx(n,{textAlign:"center",fontWeight:600,mb:2,children:s("translation:AddProduct:heading")}),e.jsx(A,{style:{width:"100%",marginBottom:25}}),e.jsx(z,{"aria-labelledby":"demo-radio-buttons-group-label",value:i.productOrRaw.toString(),onChange:t=>l("productOrRaw",t.target.value==="true"),name:"radio-buttons-group",children:e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(n,{variant:"h5",children:s("translation:AddProduct:product")})}),e.jsx(r,{item:!0,xs:6,display:"flex",justifyContent:"end",mb:2,children:e.jsx(S,{value:"true",control:e.jsx(w,{}),labelPlacement:"start"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(n,{variant:"h5",children:s("translation:AddProduct:rawMaterial")})}),e.jsx(r,{item:!0,xs:6,display:"flex",justifyContent:"end",mb:2,children:e.jsx(S,{value:"false",control:e.jsx(w,{}),labelPlacement:"start"})})]})}),i.productOrRaw&&e.jsxs(e.Fragment,{children:[" ",e.jsxs(f,{children:[e.jsx(n,{variant:"b1",fontWeight:500,color:"primary",pl:2,children:s("translation:AddProduct:category")}),e.jsx(W,{fullWidth:!0,children:e.jsxs(I,{id:"demo-simple-select",value:i.category,sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},onChange:t=>l("category",t.target.value),children:[e.jsx(u,{value:0,children:"Select a product category"}),e.jsx(u,{value:10,children:"Spices"}),e.jsx(u,{value:20,children:"Oils"}),e.jsx(u,{value:30,children:"condiments"})]})})]}),e.jsxs(f,{children:[e.jsx(n,{variant:"b1",fontWeight:500,color:"primary",pl:2,children:s("translation:AddProduct:subCategory")}),e.jsx(W,{fullWidth:!0,children:e.jsxs(I,{id:"demo-simple-select",value:i.subCategory,sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},onChange:t=>l("subCategory",t.target.value),children:[e.jsx(u,{value:0,children:"Select a product sub category"}),e.jsx(u,{value:10,children:"Cinnamon"}),e.jsx(u,{value:20,children:"Turmeric"}),e.jsx(u,{value:30,children:"Pepper"})]})})]})]}),e.jsxs(f,{children:[e.jsx(n,{color:"primary",pl:2,children:s("translation:AddProduct:name")}),e.jsx(b,{size:"small",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0}},placeholder:"Product Name ABC",fullWidth:!0,value:i.name,onChange:t=>l("name",t.target.value)})]})]}),e.jsxs(r,{item:!0,xs:12,mt:3,children:[e.jsx(n,{fontWeight:600,children:s("translation:AddProduct:pricing")}),e.jsx(n,{fontSize:"13px",mt:1,children:e.jsxs(N,{i18nKey:"AddProduct.text1",children:["Please select the units of quantity when adding price. ",e.jsx("br",{}),"(For example: per kg, per liter, per gram, per one piece, etc.)"]})}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsxs(f,{children:[e.jsx(n,{color:"primary",pl:2,children:"Price (Rupees)"}),e.jsx(b,{size:"small",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0}},placeholder:"0000",fullWidth:!0,inputProps:{style:{fontWeight:"bold"}},value:i.pricing.price,onChange:t=>l("pricing",t.target.value,"price")})]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(f,{height:85,children:[e.jsx(n,{color:"primary",pl:2,mb:1,children:"Quantity unit"}),e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:5,mb:3,children:e.jsx(b,{size:"small",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0}},placeholder:"00",fullWidth:!0,inputProps:{style:{fontWeight:"bold"}},value:i.pricing.priceQtyUnitValue,onChange:t=>l("pricing",t.target.value,"priceQtyUnitValue")})}),e.jsx(r,{item:!0,xs:7,mt:.5,children:e.jsx(W,{fullWidth:!0,children:e.jsxs(I,{id:"demo-simple-select",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},fullWidth:!0,value:i.pricing.priceQtyUnit,onChange:t=>l("pricing",t.target.value,"priceQtyUnit"),children:[e.jsx(u,{value:10,children:"kg"}),e.jsx(u,{value:20,children:"gram"})]})})})]})]})})]})]}),e.jsxs(r,{item:!0,xs:12,mt:3,children:[e.jsx(n,{fontWeight:600,children:s("translation:AddProduct:supplyQuantity")}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(f,{children:[e.jsx(n,{color:"primary",pl:2,children:"Quantity"}),e.jsx(b,{size:"small",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0}},placeholder:"0000",fullWidth:!0,inputProps:{style:{fontWeight:"bold"}},value:i.supplyQty,onChange:t=>l("supplyQty",t.target.value)})]})})})]}),e.jsxs(r,{item:!0,xs:12,mt:3,children:[e.jsx(n,{fontWeight:600,children:s("translation:AddProduct:orderQuantity")}),e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(f,{children:[e.jsx(n,{color:"primary",pl:2,children:"Quantity"}),e.jsx(b,{size:"small",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0}},placeholder:"0000",fullWidth:!0,inputProps:{style:{fontWeight:"bold"}},value:i.orderQty,onChange:t=>l("orderQty",t.target.value)})]})})})]}),e.jsxs(r,{item:!0,xs:12,mt:3,children:[e.jsx(n,{variant:"h6",fontWeight:700,mt:2,mb:2,children:s("translation:AddProduct:supplyFrequency")}),e.jsx(A,{sx:{mb:3}}),e.jsx(W,{fullWidth:!0,sx:{pl:2,pr:2},children:e.jsx(z,{"aria-labelledby":"demo-radio-buttons-group-label",value:i.supplyFrequency.toString(),onChange:t=>l("supplyFrequency",t.target.value==="true"),name:"radio-buttons-group",children:e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:9,children:e.jsx(n,{variant:"h5",children:s("translation:AddProduct:monthly")})}),e.jsx(r,{item:!0,xs:3,display:"flex",justifyContent:"end",mb:2,children:e.jsx(S,{value:"true",control:e.jsx(w,{}),labelPlacement:"start"})}),e.jsx(r,{item:!0,xs:9,children:e.jsx(n,{variant:"h5",children:s("translation:AddProduct:custom")})}),e.jsx(r,{item:!0,xs:3,display:"flex",justifyContent:"end",mb:2,children:e.jsx(S,{value:"false",control:e.jsx(w,{}),labelPlacement:"start"})})]})})}),!i.supplyFrequency&&e.jsxs(e.Fragment,{children:[e.jsx(n,{fontWeight:700,mt:2,mb:2,children:s("translation:AddProduct:monthRange")}),F()]}),e.jsx(A,{sx:{mt:3}})]}),e.jsxs(r,{item:!0,xs:12,mt:3,children:[e.jsx(n,{fontWeight:700,mt:2,mb:2,children:s("translation:AddProduct:otherDetails")}),e.jsx(n,{fontSize:"13px",mt:1,mb:1,children:s("translation:AddProduct:text2")}),e.jsx(b,{fullWidth:!0,InputProps:{sx:{borderRadius:3}},multiline:!0,rows:7,value:i.otherDetails,onChange:t=>l("otherDetails",t.target.value)})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(P,{variant:"contained",size:"large",fullWidth:!0,sx:{height:50,borderRadius:3,color:"white",mt:2},onClick:()=>y(),children:e.jsx(n,{textTransform:"capitalize",variant:"h6",children:"Save Product"})}),e.jsx(P,{size:"large",fullWidth:!0,sx:{height:50,borderRadius:3,color:"grey"},onClick:()=>R(),children:e.jsx(n,{textTransform:"capitalize",variant:"h6",children:"Discard"})})]})]})})},Ae=()=>{const d=p.useRef(null),c=p.useRef(null),s=q(),{t:C}=V(),[h,i]=p.useState(!1),[j,l]=p.useState(!1),D=k("(max-width:768px)"),F=k("(min-width:769px)"),y=v.getState().form.formData.productDetails,[R,t]=p.useState(0),a=o=>g=>{g.type==="keydown"&&(g.key==="Tab"||g.key==="Shift")||i(o)},x=e.jsx(e.Fragment,{children:e.jsx($,{closeDrawer:()=>i(!1)})}),O=o=>{s(Q(o)),i(!0)},G=()=>{const o=[...y];o.splice(R,1),s(E(o)),M()};p.useEffect(()=>{h&&d.current&&(d.current.scrollTop=d.current.scrollHeight),h&&c.current&&(c.current.scrollTop=c.current.scrollHeight)},[h]);const H=o=>{t(o),l(!0)},M=()=>{l(!1)};return e.jsxs("div",{children:[e.jsx(n,{variant:"h4",fontWeight:700,mt:2,mb:2,children:C("translation:ProductDetails:heading")}),e.jsx(A,{sx:{mb:3}}),e.jsx(m,{display:"flex",flexDirection:"column",children:y.map((o,g)=>e.jsx(m,{sx:{boxShadow:"1px 5px 8px 5px rgba(0, 0, 0, 0.05)",borderRadius:3,mt:2,p:3,bgcolor:"#FFFFFF"},children:e.jsxs(r,{container:!0,children:[e.jsxs(r,{item:!0,xs:7,children:[e.jsx(n,{fontWeight:600,variant:"h6",children:o.name}),o.productOrRaw?e.jsx(e.Fragment,{children:e.jsx(n,{children:"Spices - Cinnamon"})}):e.jsx(e.Fragment,{children:e.jsx(n,{children:C("translation:AddProduct:rawMaterial")})})]}),e.jsxs(r,{item:!0,xs:5,display:"flex",justifyContent:"end",alignItems:"center",gap:3,children:[e.jsx(T,{size:"small",onClick:()=>H(g),children:e.jsx(Y,{fontSize:"medium"})}),e.jsx(T,{size:"small",onClick:()=>O(g),children:e.jsx(_,{fontSize:"small"})})]}),e.jsx(r,{item:!0,xs:12,children:e.jsx(n,{mt:2,children:o.pricing.priceQtyUnitValue+(o.pricing.priceQtyUnit==10?"Kg":"gram")+" at Rs."+o.pricing.price+" can supply "+o.supplyQty+" units monthly."})})]})},g))}),!y.length>0&&e.jsx(e.Fragment,{children:e.jsx(n,{textAlign:"center",children:C("translation:ProductDetails:clickText")})}),e.jsxs(m,{display:"flex",justifyContent:"center",mt:2,children:[e.jsx(P,{variant:"contained",size:"medium",sx:{borderRadius:2,color:"white",ml:D?2:0},onClick:a(!0),children:e.jsx(n,{textTransform:"capitalize",variant:"b1",children:!y.length>0?"Add Product":"Add Another Product"})}),D&&e.jsx(K,{anchor:"bottom",open:h,onClose:a(!1),children:e.jsx("div",{ref:c,style:{overflowY:"auto",height:"100%"},children:x})}),F&&e.jsx(B,{open:h,onClose:()=>i(!1),"aria-labelledby":"add-product-modal",fullWidth:!0,maxWidth:"md",children:e.jsx(U,{ref:d,children:e.jsx(m,{sx:{bgcolor:"#F9FAFB",borderRadius:4,p:4},children:x})})})]}),e.jsxs(B,{open:j,onClose:()=>M(),"aria-labelledby":"add-product-modal",maxWidth:"xs",children:[e.jsx(L,{children:"Are you sure to delete? "}),e.jsx(U,{ref:d,children:e.jsxs(m,{display:"flex",justifyContent:"space-between",pl:2,pr:2,children:[e.jsx(P,{variant:"contained",color:"warning",size:"small",onClick:()=>M(),children:"No"}),e.jsx(P,{size:"small",color:"error",variant:"contained",onClick:()=>G(),children:"Yes"})]})})]})]})};export{Ae as default};
