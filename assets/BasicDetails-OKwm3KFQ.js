import{r as n,j as r}from"./react-G0VBmWxS.js";import{b as l,c as b,d as O,a as R}from"./index-VoU9dWBU.js";import{u as F,a as _}from"./react-redux-3PpUptFA.js";import{a as C}from"./axios-zw96FDk0.js";import{u as w}from"./react-i18next-ErqPsgi7.js";import{T as m,D as A,B as v,i as D,A as y,m as p}from"./@mui-sufotthT.js";import"./@babel-SkaEL2tl.js";import"./react-dom-wkoTY-Le.js";import"./scheduler-iwWdm5Ml.js";import"./react-router-dom-4OJrGarL.js";import"./react-router-kmEdF07T.js";import"./@remix-run-EOO7uaRF.js";import"./@reduxjs-OWLxucYK.js";import"./redux-vWdE9iQ8.js";import"./immer-2VFgZgpn.js";import"./reselect-knrTZChY.js";import"./redux-thunk-qyK_zz9Y.js";import"./prop-types-nTg9hSou.js";import"./i18next-NCffezqA.js";import"./i18next-http-backend-6HvsPMKJ.js";import"./cross-fetch-xd-Enngl.js";import"./clsx-2Jv0kmJG.js";import"./react-transition-group-NM3J4weW.js";import"./@emotion-cuKUoGzU.js";import"./hoist-non-react-statics-MGeNrgoW.js";import"./react-is-cHOZVpRJ.js";import"./stylis-UTZzoVRx.js";import"./@popperjs-zyV4rJhQ.js";import"./use-sync-external-store-BBrSSgse.js";const H=async()=>{const a="/Location/GetProvinces";return C.get(`https://supplierapi.cehub.lk/api${a}`).catch(s=>{console.log(s)})},J=async a=>{const s=`/Location/GetDistricts/${a}`;return C.get(`https://supplierapi.cehub.lk/api${s}`).catch(o=>{console.log(o)})},K=async a=>{const s=`/Location/GetCities/${a}`;return C.get(`https://supplierapi.cehub.lk/api${s}`).catch(o=>{console.log(o)})},S="1px 5px 8px 5px rgba(0, 0, 0, 0.05)",j="-1px 1px 8px 5px rgba(255, 0, 0, 0.3)",jt=()=>{const{t:a,i18n:s}=w(),o=F(),[e,u]=n.useState({province:l.getState().form.formData.basicDetails.province,district:l.getState().form.formData.basicDetails.district,city:l.getState().form.formData.basicDetails.city,name:l.getState().form.formData.basicDetails.name,phone:l.getState().form.formData.basicDetails.contactNo,phone2:l.getState().form.formData.basicDetails.contactNo2,email:l.getState().form.formData.basicDetails.email});let c=_(t=>t.errors.basicDetails.error);const d=(t,i)=>{console.log(t+" , "+i),u(t==="province"?{...e,province:i,district:"0",city:"0"}:t==="district"?{...e,[t]:i,city:"0"}:{...e,[t]:i}),o(O({})),o(R({...e,[t]:i}))},L=(t,i)=>{const I=i.replace(/\D/g,"").slice(0,10);o(O({})),u({...e,[t]:I}),o(R({...e,[t]:I}))},[h,W]=n.useState([]),[T,$]=n.useState(!0),G=async()=>{try{const t=await H();W(t.data)}catch(t){console.error("Error fetching provinces:",t)}finally{$(!1)}};n.useEffect(()=>{G()},[]);const[g,B]=n.useState([]),[N,E]=n.useState(!1),M=async()=>{E(!0);try{const t=await J(e.province);B(t.data)}catch(t){console.error("Error fetching districts:",t)}finally{E(!1)}};n.useEffect(()=>{!e.province==0&&M()},[e.province]);const[f,x]=n.useState([]),[q,P]=n.useState(!1),z=async()=>{P(!0);try{const t=await K(e.district);x(t.data)}catch(t){console.error("Error fetching Cities:",t)}finally{P(!1)}};return n.useEffect(()=>{!e.district==0&&z()},[e.district]),r.jsxs("div",{children:[r.jsx(m,{variant:"h4",fontWeight:700,mt:2,mb:2,children:a("translation:BasicDetails:heading")}),r.jsx(A,{sx:{mb:3}}),r.jsxs(v,{sx:{boxShadow:c==="province"?j:S,borderRadius:3,pt:1,pr:2,pb:1},children:[r.jsx(m,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:a("translation:BasicDetails:province")}),r.jsx(D,{fullWidth:!0,children:r.jsx(y,{size:"small",value:h.find(t=>t.id===e.province)||null,options:h,getOptionLabel:t=>s.language==="en"?t.provinceEnglish:s.language==="si"?t.provinceSinhala:t.provinceTamil,onChange:(t,i)=>{d("province",i?i.id:"0"),x([]),B([]),o(b({province:i,district:void 0,city:void 0}))},renderInput:t=>r.jsx(p,{...t,placeholder:h.length==0&&e.province!=0?"Loading...":a("translation:BasicDetails:SelectProvince"),sx:{".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:40,ml:1,mr:-1}}),isOptionEqualToValue:(t,i)=>t.id===i.id,loading:T})})]}),r.jsxs(v,{sx:{boxShadow:c==="district"?j:S,borderRadius:3,pt:1,pr:2,mt:3,pb:1},children:[r.jsx(m,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:a("translation:BasicDetails:district")}),r.jsx(D,{fullWidth:!0,children:r.jsx(y,{value:g.find(t=>t.id===e.district)||null,options:g,size:"small",getOptionLabel:t=>s.language==="en"?t.districtEnglish:s.language==="si"?t.districtSinhala:t.districtTamil,onChange:(t,i)=>{d("district",i?i.id:"0"),x([]),o(b({province:void 0,district:i,city:void 0}))},disabled:e.province==="0",renderInput:t=>r.jsx(p,{...t,placeholder:g.length==0&&e.district!=0?"Loading...":a("translation:BasicDetails:SelectDistrict"),sx:{".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:40,ml:1,mr:-1}}),isOptionEqualToValue:(t,i)=>t.id===i.id,loading:N})})]}),r.jsxs(v,{sx:{boxShadow:c==="city"?j:S,borderRadius:3,mt:3,pt:1,pr:2,pb:1},children:[r.jsx(m,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:a("translation:BasicDetails:city")}),r.jsx(D,{fullWidth:!0,children:r.jsx(y,{value:f.find(t=>t.id===e.city)||null,options:f,size:"small",getOptionLabel:t=>s.language==="en"?t.cityEnglish:s.language==="si"?t.citySinhala:t.cityTamil,onChange:(t,i)=>{d("city",i?i.id:"0"),o(b({province:void 0,district:void 0,city:i}))},disabled:e.district==="0",renderInput:t=>r.jsx(p,{...t,placeholder:f.length==0&&e.city!=0?"Loading...":a("translation:BasicDetails:SelectCity"),sx:{".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:40,ml:1,mr:-1}}),isOptionEqualToValue:(t,i)=>t.id===i.id,loading:q})})]}),r.jsx(p,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4}},placeholder:a("translation:BasicDetails:name"),value:e.name,error:c==="name",onChange:t=>d("name",t.target.value)}),r.jsx(p,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4},inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:10}},error:c==="number"||c==="Invalid Contact Number",placeholder:a("translation:BasicDetails:number"),value:e.phone,onChange:t=>L("phone",t.target.value)}),r.jsx(p,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4},inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:10}},error:c==="Invalid Secondary Contact Number",placeholder:a("translation:BasicDetails:number2"),value:e.phone2,onChange:t=>L("phone2",t.target.value)}),r.jsx(p,{fullWidth:!0,error:c==="email",InputProps:{sx:{borderRadius:3,mt:4}},placeholder:a("translation:BasicDetails:email"),value:e.email,onChange:t=>d("email",t.target.value)})]})};export{jt as default};
