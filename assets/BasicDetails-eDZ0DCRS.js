import{r as c,j as e}from"./react-G0VBmWxS.js";import{a as l,b as g,c as E,s as w}from"./index-b6NbnySv.js";import{u as L,a as M}from"./react-redux-3PpUptFA.js";import{a as S}from"./axios-zw96FDk0.js";import{u as N}from"./react-i18next-Ld4qvRaQ.js";import{T as h,D as O,B as x,g as v,j as b,k as p,m}from"./@mui-yOQ-dzD9.js";import"./@babel-SkaEL2tl.js";import"./react-dom-wkoTY-Le.js";import"./scheduler-iwWdm5Ml.js";import"./react-router-dom-8rnrgVg8.js";import"./react-router-mRKdHBLr.js";import"./@remix-run-EOO7uaRF.js";import"./@reduxjs-OWLxucYK.js";import"./redux-vWdE9iQ8.js";import"./immer-2VFgZgpn.js";import"./reselect-knrTZChY.js";import"./redux-thunk-qyK_zz9Y.js";import"./prop-types-nTg9hSou.js";import"./i18next-NCffezqA.js";import"./i18next-http-backend-6HvsPMKJ.js";import"./cross-fetch-xd-Enngl.js";import"./clsx-2Jv0kmJG.js";import"./react-transition-group-NM3J4weW.js";import"./@emotion-cuKUoGzU.js";import"./hoist-non-react-statics-MGeNrgoW.js";import"./react-is-cHOZVpRJ.js";import"./stylis-UTZzoVRx.js";import"./@popperjs-zyV4rJhQ.js";import"./use-sync-external-store-BBrSSgse.js";import"./html-parse-stringify-gNhRsLCw.js";import"./void-elements-KNW2nDh4.js";const F=async()=>{const r="/Location/GetProvinces";return S.get(`https://supplierapi.cehub.lk/api${r}`).catch(s=>{console.log(s)})},V=async r=>{const s=`/Location/GetDistricts/${r}`;return S.get(`https://supplierapi.cehub.lk/api${s}`).catch(o=>{console.log(o)})},q=async r=>{const s=`/Location/GetCities/${r}`;return S.get(`https://supplierapi.cehub.lk/api${s}`).catch(o=>{console.log(o)})},f="1px 5px 8px 5px rgba(0, 0, 0, 0.05)",D="-1px 1px 8px 5px rgba(255, 0, 0, 0.3)",Dt=()=>{const{t:r,i18n:s}=N(),o=L(),[i,u]=c.useState({province:l.getState().form.formData.basicDetails.province,district:l.getState().form.formData.basicDetails.district,city:l.getState().form.formData.basicDetails.city,name:l.getState().form.formData.basicDetails.name,phone:l.getState().form.formData.basicDetails.contactNo,phone2:l.getState().form.formData.basicDetails.contactNo2,email:l.getState().form.formData.basicDetails.email});let n=M(t=>t.errors.basicDetails.error);const d=(t,a)=>{console.log(t+" , "+a),u(t==="province"?{...i,province:a,district:"0",city:"0"}:t==="district"?{...i,[t]:a,city:"0"}:{...i,[t]:a}),o(E({})),o(w({...i,[t]:a}))},j=(t,a)=>{const P=a.replace(/\D/g,"").slice(0,10);o(E({})),u({...i,[t]:P}),o(w({...i,[t]:P}))},[y,R]=c.useState([]),W=async()=>{try{const t=await F();R(t.data)}catch(t){console.error("Error fetching provinces:",t)}};c.useEffect(()=>{W()},[]);const[C,I]=c.useState([]),$=async()=>{try{const t=await V(i.province);I(t.data)}catch(t){console.error("Error fetching districts:",t)}};c.useEffect(()=>{!i.province==0&&$()},[i.province]);const[B,T]=c.useState([]),G=async()=>{try{const t=await q(i.district);T(t.data)}catch(t){console.error("Error fetching Cities:",t)}};return c.useEffect(()=>{!i.district==0&&G()},[i.district]),e.jsxs("div",{children:[e.jsx(h,{variant:"h4",fontWeight:700,mt:2,mb:2,children:r("translation:BasicDetails:heading")}),e.jsx(O,{sx:{mb:3}}),e.jsxs(x,{sx:{boxShadow:n==="province"?D:f,borderRadius:3,pt:1,pr:2,pb:1},children:[e.jsx(h,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:r("translation:BasicDetails:province")}),e.jsx(v,{fullWidth:!0,children:e.jsxs(b,{value:i.province,onChange:t=>(d("province",t.target.value),o(g({province:y.find(a=>a.id===t.target.value),district:void 0,city:void 0}))),sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},placeholder:"Select a Province",children:[e.jsx(p,{value:"0",children:r("translation:BasicDetails:SelectProvince")}),y.map(t=>e.jsx(p,{value:t.id,children:s.language=="en"?t.provinceEnglish:s.language=="si"?t.provinceSinhala:t.provinceTamil},t.id))]})})]}),e.jsxs(x,{sx:{boxShadow:n==="district"?D:f,borderRadius:3,pt:1,pr:2,mt:3,pb:1},children:[e.jsx(h,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:r("translation:BasicDetails:district")}),e.jsx(v,{fullWidth:!0,children:e.jsxs(b,{value:i.district,onChange:t=>(d("district",t.target.value),o(g({province:void 0,district:C.find(a=>a.id===t.target.value),city:void 0}))),disabled:i.province==="0",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},children:[e.jsx(p,{value:"0",children:r("translation:BasicDetails:SelectDistrict")}),C.map(t=>e.jsx(p,{value:t.id,children:s.language=="en"?t.districtEnglish:s.language=="si"?t.districtSinhala:t.districtTamil},t.id))]})})]}),e.jsxs(x,{sx:{boxShadow:n==="city"?D:f,borderRadius:3,mt:3,pt:1,pr:2,pb:1},children:[e.jsx(h,{variant:"b1",fontWeight:600,color:"primary",pl:2,children:r("translation:BasicDetails:city")}),e.jsx(v,{fullWidth:!0,children:e.jsxs(b,{value:i.city,onChange:t=>(d("city",t.target.value),o(g({province:void 0,district:void 0,city:B.find(a=>a.id===t.target.value)}))),disabled:i.district==="0",sx:{boxShadow:"none",".MuiOutlinedInput-notchedOutline":{border:0},borderRadius:3,height:30},children:[e.jsx(p,{value:"0",children:r("translation:BasicDetails:SelectCity")}),B.map(t=>e.jsx(p,{value:t.id,children:s.language=="en"?t.cityEnglish:s.language=="si"?t.citySinhala:t.cityTamil},t.id))]})})]}),e.jsx(m,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4}},placeholder:r("translation:BasicDetails:name"),value:i.name,error:n==="name",onChange:t=>d("name",t.target.value)}),e.jsx(m,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4},inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:10}},error:n==="number"||n==="Invalid Contact Number",placeholder:r("translation:BasicDetails:number"),value:i.phone,onChange:t=>j("phone",t.target.value)}),e.jsx(m,{fullWidth:!0,InputProps:{sx:{borderRadius:3,mt:4},inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:10}},error:n==="Invalid Secondary Contact Number",placeholder:r("translation:BasicDetails:number2"),value:i.phone2,onChange:t=>j("phone2",t.target.value)}),e.jsx(m,{fullWidth:!0,error:n==="email",InputProps:{sx:{borderRadius:3,mt:4}},placeholder:r("translation:BasicDetails:email"),value:i.email,onChange:t=>d("email",t.target.value)})]})};export{Dt as default};
